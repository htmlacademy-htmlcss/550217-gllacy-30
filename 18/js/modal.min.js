let modal = document.querySelector(".modal"), openModalButton = document.querySelector(".feedback__button"), closeModalButton = modal.querySelector(".modal__button-close"), modalForm = modal.querySelector(".modal__form"), inputName = modal.querySelector(".modal__input--name"), inputMail = modal.querySelector(".modal__input--email"), isStorageSupport = !0, storage = ""; try { localStorage.getItem("name", inputName.value), localStorage.getItem("mail", inputMail.value) } catch (e) { isStorageSupport = !1 } openModalButton.addEventListener("click", function (e) { e.preventDefault(), modal.classList.add("modal--open"), storage ? (inputName.value = storage, inputMail.focus()) : inputName.focus() }), closeModalButton.addEventListener("click", function () { modal.classList.remove("modal--open"), modal.classList.remove("modal--error") }), modalForm.addEventListener("submit", function (e) { inputName.value && inputMail.value ? isStorageSupport && (localStorage.setItem("name", inputName.value), localStorage.setItem("mail", inputMail.value)) : (e.preventDefault(), modal.classList.remove("modal--error"), modal.offsetWidth = modal.offsetWidth, modal.classList.add("modal--error")) }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && modal.classList.contains("modal--open") && (e.preventDefault(), modal.classList.remove("modal--open"), modal.classList.remove("modal--error")) });
